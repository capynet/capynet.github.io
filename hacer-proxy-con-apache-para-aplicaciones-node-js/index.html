<!DOCTYPE html>
<html lang="es-ES">

<!-- Mirrored from ecapy.com/hacer-proxy-con-apache-para-aplicaciones-node-js/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:31:29 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Capy |   Hacer proxy con Apache para aplicaciones node.js</title>
			<link rel="shortcut icon" href="../wp-content/uploads/2016/01/1454276298_globe-01.png" type="image/x-icon"/>
		<link rel="stylesheet" type="text/css" href="#">

	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://ecapy.com/wp-content/themes/prolog/js/html5.js"></script>
	<![endif]-->

	<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Feed" href="../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; RSS de los comentarios" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Hacer proxy con Apache para aplicaciones node.js RSS de los comentarios" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/ecapy.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-theme-sublime-text-css'  href='../wp-content/plugins/crayon-syntax-highlighter/themes/sublime-text/sublime-text2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='../wp-content/plugins/crayon-syntax-highlighter/fonts/monaco2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='thm-style-css'  href='../wp-content/themes/prolog/style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='../wp-content/themes/prolog/css/font-awesome.min1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='quick-style-css'  href='../wp-content/themes/prolog/quick-style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='themeum-preset-css'  href='../wp-content/themes/prolog/css/presets/preset31c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='redux-google-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%7CRoboto+Slab%3A100%2C300%2C400%2C700&amp;ver=1454375832' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Programación de Panels&#8221; del libro &#8220;Drupal 7 &#8211; Nivel experto' href='../programacion-de-panels-del-libro-drupal-7-nivel-experto/index.html' />
<link rel='next' title='Nuevo dominio: ecapy.com' href='../nuevo-dominio-ecapy-com/index.html' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../indexa890.html?p=1672' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embede387.json?url=http%3A%2F%2Fecapy.com%2Fhacer-proxy-con-apache-para-aplicaciones-node-js%2F" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed8b0d?url=http%3A%2F%2Fecapy.com%2Fhacer-proxy-con-apache-para-aplicaciones-node-js%2F&amp;format=xml" />
<style type="text/css" title="dynamic-css" class="options-output">body, p{font-family:Open Sans;font-weight:normal;font-style:normal;color:#1a1a1a;font-size:16px;}h1, h2, h3, h4, h5, h6{font-family:Roboto Slab;font-weight:400;font-style:normal;color:#1a1a1a;}#navigation .navbar-nav > li > a, .navbar-main .dropdown-menu > li > a{font-family:Open Sans;font-weight:normal;font-style:normal;color:#777777;font-size:16px;}</style></head>

<body class="single single-post postid-1672 single-format-standard">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header header" role="banner">
			<div class="container">
				<div id="navigation" class="navbar navbar-default">
                    <div class="row">
                        <div class="col-sm-3">
        					<div class="navbar-header">
        						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        						</button>
        	                    <a class="navbar-brand" href="../index.html">
        	                    	<h1 class="logo-wrapper">
        		                    	Capy        		                    </h1>
        		                </a>
        					</div>
                        </div>

                        <div id="main-menu" class="col-sm-9">
                            <div class="hidden-xs">
                                <ul id="menu-principal" class="nav navbar-nav navbar-main"><li id="menu-item-2961" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2961"><a title="Drupal" href="../category/drupal/index.html"><span class="fa fa-drupal"></span>&nbsp;Drupal</a></li>
<li id="menu-item-2959" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li id="menu-item-2958" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2958"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li id="menu-item-2960" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/#main-menu-->

                        <div id="mobile-menu" class="visible-xs">
                            <div class="collapse navbar-collapse">
                                <ul id="menu-principal-1" class="nav navbar-nav"><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2961"><a title="Drupal" href="../category/drupal/index.html"><span class="glyphicon drupal"></span>&nbsp;Drupal</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2958"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/.#mobile-menu-->

                    </div><!--/.row--> 
				</div><!--/.container--> 
			</div>
		</header><!--/#header-->


    <section id="main" class="container">
        <div class="row">
            <div id="content" class="site-content col-md-9" role="main">

                
                    
                        <article id="post-1672" class="post-1672 post type-post status-publish format-standard has-post-thumbnail hentry category-mix-de-cosas tag-javascript tag-linux tag-node-js tag-servidores">
    <header class="entry-header">

            <div class="entry-thumbnail">
            <img width="850" height="253" src="../wp-content/uploads/2014/09/node-header.jpg" class="img-responsive wp-post-image" alt="node-header" srcset="http://ecapy.com/wp-content/uploads/2014/09/node-header.jpg 850w, http://ecapy.com/wp-content/uploads/2014/09/node-header-300x89.jpg 300w, http://ecapy.com/wp-content/uploads/2014/09/node-header-768x229.jpg 768w" sizes="(max-width: 850px) 100vw, 850px" />        </div>
    
    </header> <!--/.entry-header -->

    <div class="clearfix post-content media">
        <div class="pull-left">
            <h4 class="post-format">
                <i class="fa fa-thumb-tack"></i>
            </h4>

        </div>
    

    <div class="media-body">
        <h2 class="entry-title">
            <a href="index.html" rel="bookmark">Hacer proxy con Apache para aplicaciones node.js</a>
                    </h2> <!-- //.entry-title -->

        <div class="clearfix entry-meta">
            <ul>
                                <li class="author"> <i class="fa fa-user"></i> <a href="../author/capynet/index.html" title="Entradas de capynet" rel="author">capynet</a></li> 
                
                                <li class="publish-date"><i class="fa fa-calendar"></i><time class="entry-date" datetime="2013-01-24T15:56:48+00:00">24 Ene,  2013</time></li>  
                
                                <li class="category"><i class="fa fa-folder-open-o"></i><a href="../category/mix-de-cosas/index.html" rel="category tag">Mix de cosas</a></li>
                                
                                <li class="tag"><i class="fa fa-tags"></i><a href="../tag/javascript/index.html" rel="tag">JavaScript</a>, <a href="../tag/linux/index.html" rel="tag">Linux</a>, <a href="../tag/node-js/index.html" rel="tag">node.js</a>, <a href="../tag/servidores/index.html" rel="tag">Servidores</a><br /> </li>
                
                 
                                    <li class="comments-link">
                        <i class="fa fa-comments-o"></i> <a href="index.html#comments">12 comments</a>                    </li>
                                
                                    <li class="edit-link">
                                             </li>
                            </ul>
        </div> <!--/.entry-meta -->

        <div class="entry-summary">
            <p>Tenemos una app desarrollada en nodejs que<strong> corre en el puerto 4000</strong> de nuestro servidor<strong> y queremos exponerla por el puerto 80</strong> para que la gente pueda usarla. El problema obvio es que por lo general tenemos corriendo un apache, nginx o cualquier otro servidor http.</p>
<p>La solución es usar los módulos de proxy que incluyen cada uno de estos servidores web. Hoy puntualmente lo vamos a hacer con Apache.</p>
<p>Habilitamos los modulos <strong>proxy</strong> y <strong>proxy_http</strong> para permitir el reenvío de peticiones HTTP y HTTPS:<br />
[console]<br />
sudo a2enmod proxy<br />
sudo a2enmod proxy_http<br />
[/console]</p>
<p>Luego nos queda crear un vhost:<br />
[console]sudo nano /etc/apache2/sites-available/mipaginaweb.com[/console]</p>
<p>Y ponerle lo siguiente:</p>
<p>[apacheconf]</p>
<p>ServerName mipaginaweb.com<br />
ServerAlias www.mipaginaweb.com</p>
<p>ProxyRequests off</p>
<p>Order deny,allow<br />
Allow from all</p>
<p>&lt;location &#8220;/&#8221;&gt;<br />
ProxyPass http://localhost:4000/ retry=0<br />
ProxyPassReverse http://localhost:4000/</p>
<p>[/apacheconf]</p>
<p>Habilitamos nuestro nuevo vhost:<br />
[console]sudo a2ensite mipaginaweb.com[/console]</p>
<p>Hemos terminado. reiniciamos apache y a correr!<br />
[console]sudo service apache2 restart[/console]</p>
<p><span style="color: #993300;" data-mce-mark="1"><strong>Bonus</strong></span>: si estas en un entorno de desarrollo y quieres acceder a <em>mipaginaweb.com</em>, edita tu archivo hosts (<strong>sudo nano /etc/hosts</strong>) y añade tu nuevo dominio:</p>
<p>[console]<br />
127.0.0.1 localhost<br />
127.0.0.1 mipaginaweb.com www.mipaginaweb.com<br />
[/console]</p>
        </div> <!-- //.entry-summary -->
            </div>
 

    </div>

</article> <!--/#post-->
                                                     <div class="clearfix post-navigation">
                                <span class="btn-style previous-post pull-left"><a href="../programacion-de-panels-del-libro-drupal-7-nivel-experto/index.html" rel="prev"><i class="fa fa-long-arrow-left"></i> previous article</a></span>                                 <span class="btn-style next-post pull-right"><a href="../nuevo-dominio-ecapy-com/index.html" rel="next">next article <i class="fa fa-long-arrow-right"></i></a></span>                            </div> <!-- .post-navigation -->
                                            
                        <div id="comments" class="comments-area comments">
            <h3 class="comments-title">
            12 Comments        </h3>

        <ul class="comment-list">

            		<li class="comment even thread-even depth-1" id="li-comment-617">
			<div id="comment-617" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://2.gravatar.com/avatar/efd70387cd0490d1f0e637ebfe3dfc54?s=80&amp;d=identicon&amp;r=g' srcset='http://2.gravatar.com/avatar/efd70387cd0490d1f0e637ebfe3dfc54?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">jorge</span>							<span class="comment-date">06/02/2013</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>tengo una pregunta<br />
es posible reescribir las urls antes de pasarlas a nuestro servidor node js?<br />
algo así como un rewriteRule, para acceder desde node solo a los querystring y no tener que procesar demasiado la url<br />
Espero sus comentarios</p>
						</div>
					</div>
				
			</div>
		<ul class="children">
		<li class="comment byuser comment-author-capynet bypostauthor odd alt depth-2" id="li-comment-618">
			<div id="comment-618" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='../index.html' rel='external nofollow' class='url'>Capy</a></span>							<span class="comment-date">08/02/2013</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>No se si te entiendo. me das un ejemplo?</p>
						</div>
					</div>
				
			</div>
		<ul class="children">
		<li class="comment even depth-3" id="li-comment-619">
			<div id="comment-619" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://2.gravatar.com/avatar/efd70387cd0490d1f0e637ebfe3dfc54?s=80&amp;d=identicon&amp;r=g' srcset='http://2.gravatar.com/avatar/efd70387cd0490d1f0e637ebfe3dfc54?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">jorge</span>							<span class="comment-date">09/02/2013</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Algo así:<br />
Sabemos que tenemos dos dominios, mipaginaweb1.com y mipaginaweb2.com<br />
Se supone que mipaginaweb2.com es nuestra app en node (la otra, un index html común y corriente)<br />
Un usuario trata de acceder a <a href="http://www.mipaginaweb2.com/" rel="nofollow">http://www.mipaginaweb2.com</a><br />
Apache lo redirecciona a <a href="http://localhost:4000/" rel="nofollow">http://localhost:4000/</a><br />
La pregunta es, si un usuario tratara de acceder (por ejemplo) a la página <a href="http://www.mipaginaweb2.com/users/fulanodetal" rel="nofollow">http://www.mipaginaweb2.com/users/fulanodetal</a><br />
¿existiría alguna forma de reescribir esa url antes de redirigir, para que esta quede del siguiente modo?: mipaginaweb2.com?location=users&amp;search=fulanodetal<br />
Algo así como lo que hacemos con htaccess<br />
Saludos, y gracias por su atención</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment byuser comment-author-capynet bypostauthor odd alt thread-odd thread-alt depth-1" id="li-comment-620">
			<div id="comment-620" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='../index.html' rel='external nofollow' class='url'>Capy</a></span>							<span class="comment-date">09/02/2013</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>aaaaaaaa ya te entendí. Bueno acá Apache es transparente, y lo único que esta haciendo reenviar la petición. no cumple ningún rol a demás de ese, ni debe hacerlo ya que el día de mañana puede que tu proxy sea nginx o varnish. Quiero decir con esto que ni si quiera deberías plantear hacer algo así desde apache, déjale eso a tu app.</p>
<p>Si tu app esta hecha en express  ya tenes un sistema de ruteo mucho mas fácil que la reescritura de urls.</p>
<p>por ejemplo:</p>
		<div id="crayon-5844368659579764105321" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
function buscar(donde, quecosa, callback) {

    //implementa la logica de tu busqueda aqui

    callback(null, "aqui va el contenido a devolver")
}

server.get('/users/:usuario', function (req, res) {

    buscar("users", req.params.usuario, function (err, respuesta) {
        if (err) throw err;
        return  res.send(respuesta);
    });

});</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-5844368659579764105321-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368659579764105321-2">2</div><div class="crayon-num" data-line="crayon-5844368659579764105321-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368659579764105321-4">4</div><div class="crayon-num" data-line="crayon-5844368659579764105321-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368659579764105321-6">6</div><div class="crayon-num" data-line="crayon-5844368659579764105321-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368659579764105321-8">8</div><div class="crayon-num" data-line="crayon-5844368659579764105321-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368659579764105321-10">10</div><div class="crayon-num" data-line="crayon-5844368659579764105321-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368659579764105321-12">12</div><div class="crayon-num" data-line="crayon-5844368659579764105321-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368659579764105321-14">14</div><div class="crayon-num" data-line="crayon-5844368659579764105321-15">15</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5844368659579764105321-1"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">buscar</span><span class="crayon-sy">(</span><span class="crayon-v">donde</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">quecosa</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">callback</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368659579764105321-2">&nbsp;</div><div class="crayon-line" id="crayon-5844368659579764105321-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//implementa la logica de tu busqueda aqui</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368659579764105321-4">&nbsp;</div><div class="crayon-line" id="crayon-5844368659579764105321-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">callback</span><span class="crayon-sy">(</span><span class="crayon-t">null</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"aqui va el contenido a devolver"</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368659579764105321-6"><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-5844368659579764105321-7">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5844368659579764105321-8"><span class="crayon-v">server</span><span class="crayon-sy">.</span><span class="crayon-e">get</span><span class="crayon-sy">(</span><span class="crayon-s">'/users/:usuario'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">req</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">res</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5844368659579764105321-9">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-5844368659579764105321-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">buscar</span><span class="crayon-sy">(</span><span class="crayon-s">"users"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">req</span><span class="crayon-sy">.</span><span class="crayon-v">params</span><span class="crayon-sy">.</span><span class="crayon-v">usuario</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">respuesta</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5844368659579764105321-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">if</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">err</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-st">throw</span><span class="crayon-h"> </span><span class="crayon-v">err</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368659579764105321-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">return</span><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">res</span><span class="crayon-sy">.</span><span class="crayon-e">send</span><span class="crayon-sy">(</span><span class="crayon-v">respuesta</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5844368659579764105321-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368659579764105321-14">&nbsp;</div><div class="crayon-line" id="crayon-5844368659579764105321-15"><span class="crayon-sy">}</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p></p>
<p>Esto ya te permitiría usar url del tipo &#8220;http://www.mipaginaweb2.com/users/fulanodetal&#8221;, &#8220;http://www.mipaginaweb2.com/users/fulanodecual&#8221;</p>
<p>Las reescrituras de url son pasado en nodejs, básicamente porque frameworks como expressjs ya traen de serie sistemas de routing.</p>
<p>Para terminar por si no ha quedado claro: las reescrituras de url nacieron porque no era posible a nivel de aplicación definir urls del tipo <strong>/usuario/pedro</strong> y mapearla a una funcion. (PHP por ejemplo) Para lograrlo habia que pedirle al servidor web que re interpretara esa url a parámetros que se pudieran pasar a un archivo que los leyera y que llamara a una función en consecuencia.<br />
Y la cosa con nodejs es distinta, ya que node al ser servidor web y aplicación web al mismo tiempo es capaz de mapear directamente urls a funciones (como el ejemplo que dejé arriba).</p>
<p>Saludos.</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-621">
			<div id="comment-621" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://2.gravatar.com/avatar/80f4a93dfd3573825c59ef9ebff453a1?s=80&amp;d=identicon&amp;r=g' srcset='http://2.gravatar.com/avatar/80f4a93dfd3573825c59ef9ebff453a1?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">David Hernandez</span>							<span class="comment-date">01/05/2013</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Disculpe, soy nuevo en este mundo de node.js queria saber si tengo una pagina hecha en frames por ejemplo, y contiene un index.html en una frame y otro index.jade en otro frame, como puedo hacer para correr dicha pagina principal donde corran ambas paginas? Ya que por un servidor apache no correria los websockets del index.jade, y no tengo idea como ejecutar un html desde node.js, Gracias por su atencion</p>
						</div>
					</div>
				
			</div>
		<ul class="children">
		<li class="comment byuser comment-author-capynet bypostauthor odd alt depth-2" id="li-comment-622">
			<div id="comment-622" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='../index.html' rel='external nofollow' class='url'>Capy</a></span>							<span class="comment-date">03/05/2013</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Hola David. Suponiendo que estas usando expressjs, fa forma de servir documentos con extensión .html es esta: <a href="http://www.hacksparrow.com/how-to-server-static-html-files-in-express-js.html" rel="nofollow">http://www.hacksparrow.com/how-to-server-static-html-files-in-express-js.html</a></p>
<p>Frames&#8230; a ver, supongamos que tenes tupagina.com/home y en esa home se renderiza una pagina que tiene dos iframe. pues lo único que tendrías que hacer es apuntar la url de cada uno de los frame a una url que hayas definido en express, y en cada una de esas nuevas rutas entregas el el .jade o .html que quieras&#8230;</p>
<p>Perdón por dar una respuesta tan poco precisa, pero es que no se muy bien qué necesitas.</p>
<p>Un saludo.</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-623">
			<div id="comment-623" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://0.gravatar.com/avatar/02084be50ec8e8d6cb17d81c416ecc88?s=80&amp;d=identicon&amp;r=g' srcset='http://0.gravatar.com/avatar/02084be50ec8e8d6cb17d81c416ecc88?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">Dave Olvera</span>							<span class="comment-date">11/02/2015</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Hola que tal me preguntaba si esto del proxy es lo que necesito para redireccionar una petición a otro dominio. Por ejemplo digamos que yo tengo mi aplicación en el dominio a.com (node.js)  desde esta aplicación yo hago un request a mi propio dominio, entonces desde node.js ¿Puedo hacer una segunda petición a mi dominio b.com?</p>
<p>Pregunto esto porque no quiero hacer la petición directamente desde el cliente ya que es necesario que la url b.com no se mantenga expuesta.</p>
<p>Saludos!!!</p>
						</div>
					</div>
				
			</div>
		<ul class="children">
		<li class="comment byuser comment-author-capynet bypostauthor odd alt depth-2" id="li-comment-624">
			<div id="comment-624" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='../index.html' rel='external nofollow' class='url'>Capy</a></span>							<span class="comment-date">17/02/2015</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Bueno según entiendo, quieres que la gente entre en a.com y que internamente esa petición se mande a b.com para que b.com la responda y tu la devuelvas finalmente por a.com</p>
<p>En ese caso es algo parecido a lo que se menciona en este post:<br />
mipaginaweb.com = a.com<br />
<a href="http://localhost:4000/" rel="nofollow">http://localhost:4000</a> = b.com</p>
<p>A resumidas cuentas un dominio se esconde detrás del otro.</p>
<p>Espero que lo consigas. Un saludo.</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="li-comment-625">
			<div id="comment-625" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://0.gravatar.com/avatar/6afdaf38e677397a5a71106a02cad90d?s=80&amp;d=identicon&amp;r=g' srcset='http://0.gravatar.com/avatar/6afdaf38e677397a5a71106a02cad90d?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='http://www.colibra.net/' rel='external nofollow' class='url'>Super</a></span>							<span class="comment-date">23/05/2015</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Hola capy,</p>
<p>gracias por el artículo, este me ha dado una idea respecto a un caso similar sobre el que estoy trabajando, pero al mismo tiempo me generó un problema que no he podido resolver, te explico.</p>
<p><b>Antecedentes:</b><br />
* http server: apache2<br />
* tengo un localhost en el puerto el 443 (con SSL).<br />
* tengo varios dominios virtuales adicionales con puertos distintos sobre apache (ej: 5001, 5002 ..).<br />
* los dominios virtuales adicionales son cargados mediante &#8220;iframe&#8221; sobre una página perteneciente al localhost.</p>
<p><b>Requerimiento:</b><br />
* necesito tener acceso JS desde desde el localhost a los iframes que contienen los dominios virtuales adicionales.</p>
<p><b>Propuesta:</b><br />
* Utilizar proxys.</p>
<p><b>Problema:</b><br />
* en los distintos dominios virtuales adicionales existen archivos de igual nombre en iguales rutas relativas, por lo que al realizar una configuración proxy mediante apache, las URL de estos archivos se sobreescriben. Ej: Dom Virtual 1: localhost:5001/index.html; Dom Virtual 2: localhost:5002/index.html.<br />
* la solución me debe permitir mantener los nombres originales de los archivos.</p>
<p>Has tenido alguna vez un problema similar? tienes alguna sugerencia ?<br />
Espero q me puedas ayudar, de todas maneras muchas gracias.</p>
<p>salu2!</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-626">
			<div id="comment-626" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://2.gravatar.com/avatar/8f7c38193746bab9ad163f44c9e493a9?s=80&amp;d=identicon&amp;r=g' srcset='http://2.gravatar.com/avatar/8f7c38193746bab9ad163f44c9e493a9?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">jorarome</span>							<span class="comment-date">14/06/2015</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Hola Crapy, retomando la app desarrollada en nodejs que correo en el puerto 4000, que recomendacion da para sacarla a puerto 80 de varios virtualhost usando Apache?, por ejem: mipaguinaweb.com, tupaginaweb.org, lapaginaweb.com,etc. Agradezco de atenmano su comentario.</p>
						</div>
					</div>
				
			</div>
		<ul class="children">
		<li class="comment byuser comment-author-capynet bypostauthor even depth-2" id="li-comment-627">
			<div id="comment-627" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='../index.html' rel='external nofollow' class='url'>Capy</a></span>							<span class="comment-date">20/06/2015</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>¿Crapy? o_O</p>
<p>Podes meter todos los alias que necesites:<br />
[apacheconf]<br />
ServerName ejemplo.com<br />
ServerAlias otraurl.com unamas.com etc.com<br />
[/apacheconf]<br />
Saludos.</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment odd alt thread-even depth-1" id="li-comment-6672">
			<div id="comment-6672" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://0.gravatar.com/avatar/90791225e433f91619d55a2b18258735?s=80&amp;d=identicon&amp;r=g' srcset='http://0.gravatar.com/avatar/90791225e433f91619d55a2b18258735?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">Castro Garcia Jose Luis</span>							<span class="comment-date">11/10/2016</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Me sale este error:<br />
Job for apache2.service failed because the control process exited with error code. See &#8220;systemctl status apache2.service&#8221; and &#8220;journalctl -xe&#8221; for details.</p>
<p>trabajo en Ubuntu</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
        </ul><!-- .comment-list -->

        
                <p class="no-comments">:).</p>
        
    
    </div>                                            
                    
                        
            </div> <!-- #content -->

            <div id="sidebar" class="col-md-3" role="complementary">
                

	<div class="my-profile clearfix">
		<div class="profile-bg">
						<img class="img-responsive" src="../wp-content/uploads/2016/01/14567-brick-wall-and-wood-floor-1920x1200-abstract-wallpaper.jpg">
			
						<div class="profile-img">
				<img class="img-responsive" src="../wp-content/uploads/2016/01/IMG-20150521-WA0007-1.jpg">
			</div>
					</div>

		<div class="profile-desc">
							<h2>Capy (Marcelo Tosco)</h2>
										<span>Desarrollador web</span>
									<p>Hola!. en mi blog casi siempre escribo sobre informática, pero no te extrañes si algún día aparece un post que no tenga nada que ver a lo que estés acostumbrado ;)</p>
					</div>

		
<div class="social-share">
	
	<ul>
		
			
			<li><a class="twitter" href="http://twitter.com/capynet" target="_blank" ><i class="fa fa-twitter"></i></a></li>
									<li><a class="linkedin" href="https://es.linkedin.com/in/capynet" target="_blank"><i class="fa fa-linkedin"></i></a></li>
											 
		
	</ul>
	
</div>




	</div>

                <div class="sidebar-inner">
                    <aside class="widget-area">
                                            </aside>
                </div>
            </div> <!-- #sidebar -->

        </div> <!-- .row -->
    </section> <!-- .container -->


        <footer id="footer">
        <div class="container">
            <div class="footer">
                <div class="row">
                                            <div class="col-sm-6">
                          <a href="http://asociaciondrupal.es/" target="_blank"><img class="alignnone size-full wp-image-3123" src="../wp-content/uploads/2016/01/miembro-aed_150x75.jpg" alt="miembro-aed_150x75" width="150" height="75" /></a>                        </div>
                    
                                    </div>
            </div>
        </div>
    </footer><!--/#footer-->
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-238596-8', 'auto');
  ga('send', 'pageview');

</script>
<script type='text/javascript' src='../wp-includes/js/imagesloaded.min55a0.js?ver=3.2.0'></script>
<script type='text/javascript' src='../wp-includes/js/masonry.mind617.js?ver=3.3.2'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/bootstrap.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.prettyPhoto1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.countdown.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/main1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-includes/js/wp-embed.min1c9b.js?ver=4.6.1'></script>
</body>

<!-- Mirrored from ecapy.com/hacer-proxy-con-apache-para-aplicaciones-node-js/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:31:31 GMT -->
</html>