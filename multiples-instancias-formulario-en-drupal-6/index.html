<!DOCTYPE html>
<html lang="es-ES">

<!-- Mirrored from ecapy.com/multiples-instancias-formulario-en-drupal-6/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:36:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Capy |   Crear múltiples instancias de un mismo formulario en Drupal 6</title>
			<link rel="shortcut icon" href="../wp-content/uploads/2016/01/1454276298_globe-01.png" type="image/x-icon"/>
		<link rel="stylesheet" type="text/css" href="#">

	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://ecapy.com/wp-content/themes/prolog/js/html5.js"></script>
	<![endif]-->

	<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Feed" href="../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; RSS de los comentarios" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Crear múltiples instancias de un mismo formulario en Drupal 6 RSS de los comentarios" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/ecapy.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-theme-sublime-text-css'  href='../wp-content/plugins/crayon-syntax-highlighter/themes/sublime-text/sublime-text2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='../wp-content/plugins/crayon-syntax-highlighter/fonts/monaco2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='thm-style-css'  href='../wp-content/themes/prolog/style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='../wp-content/themes/prolog/css/font-awesome.min1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='quick-style-css'  href='../wp-content/themes/prolog/quick-style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='themeum-preset-css'  href='../wp-content/themes/prolog/css/presets/preset31c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='redux-google-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%7CRoboto+Slab%3A100%2C300%2C400%2C700&amp;ver=1454375832' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Drupal 6: Módulos y templates con acentos, &#8220;¿&#8221; y &#8220;ñ&#8221; mal codificados [solución]' href='../solucion-modulos-y-templates-con-acentos-y-caracteres-mal-codificados/index.html' />
<link rel='next' title='Hacer bocadillos para comentarios con CSS puro' href='../hacer-bocadillos-para-comentarios-con-css-puro/index.html' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../index6ca3.html?p=534' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed2de0.json?url=http%3A%2F%2Fecapy.com%2Fmultiples-instancias-formulario-en-drupal-6%2F" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed645f?url=http%3A%2F%2Fecapy.com%2Fmultiples-instancias-formulario-en-drupal-6%2F&amp;format=xml" />
<style type="text/css" title="dynamic-css" class="options-output">body, p{font-family:Open Sans;font-weight:normal;font-style:normal;color:#1a1a1a;font-size:16px;}h1, h2, h3, h4, h5, h6{font-family:Roboto Slab;font-weight:400;font-style:normal;color:#1a1a1a;}#navigation .navbar-nav > li > a, .navbar-main .dropdown-menu > li > a{font-family:Open Sans;font-weight:normal;font-style:normal;color:#777777;font-size:16px;}</style></head>

<body class="single single-post postid-534 single-format-standard">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header header" role="banner">
			<div class="container">
				<div id="navigation" class="navbar navbar-default">
                    <div class="row">
                        <div class="col-sm-3">
        					<div class="navbar-header">
        						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        						</button>
        	                    <a class="navbar-brand" href="../index.html">
        	                    	<h1 class="logo-wrapper">
        		                    	Capy        		                    </h1>
        		                </a>
        					</div>
                        </div>

                        <div id="main-menu" class="col-sm-9">
                            <div class="hidden-xs">
                                <ul id="menu-principal" class="nav navbar-nav navbar-main"><li id="menu-item-2961" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2961"><a title="Drupal" href="../category/drupal/index.html"><span class="fa fa-drupal"></span>&nbsp;Drupal</a></li>
<li id="menu-item-2959" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li id="menu-item-2958" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2958"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li id="menu-item-2960" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/#main-menu-->

                        <div id="mobile-menu" class="visible-xs">
                            <div class="collapse navbar-collapse">
                                <ul id="menu-principal-1" class="nav navbar-nav"><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2961"><a title="Drupal" href="../category/drupal/index.html"><span class="glyphicon drupal"></span>&nbsp;Drupal</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2958"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/.#mobile-menu-->

                    </div><!--/.row--> 
				</div><!--/.container--> 
			</div>
		</header><!--/#header-->


    <section id="main" class="container">
        <div class="row">
            <div id="content" class="site-content col-md-9" role="main">

                
                    
                        <article id="post-534" class="post-534 post type-post status-publish format-standard has-post-thumbnail hentry category-programacion tag-drupal-6 tag-fapi tag-formularios-multiples tag-hook_forms">
    <header class="entry-header">

            <div class="entry-thumbnail">
            <img width="850" height="253" src="../wp-content/uploads/2015/07/drupal-header.jpg" class="img-responsive wp-post-image" alt="drupal-header" srcset="http://ecapy.com/wp-content/uploads/2015/07/drupal-header.jpg 850w, http://ecapy.com/wp-content/uploads/2015/07/drupal-header-300x89.jpg 300w, http://ecapy.com/wp-content/uploads/2015/07/drupal-header-768x229.jpg 768w" sizes="(max-width: 850px) 100vw, 850px" />        </div>
    
    </header> <!--/.entry-header -->

    <div class="clearfix post-content media">
        <div class="pull-left">
            <h4 class="post-format">
                <i class="fa fa-thumb-tack"></i>
            </h4>

        </div>
    

    <div class="media-body">
        <h2 class="entry-title">
            <a href="index.html" rel="bookmark">Crear múltiples instancias de un mismo formulario en Drupal 6</a>
                    </h2> <!-- //.entry-title -->

        <div class="clearfix entry-meta">
            <ul>
                                <li class="author"> <i class="fa fa-user"></i> <a href="../author/capynet/index.html" title="Entradas de capynet" rel="author">capynet</a></li> 
                
                                <li class="publish-date"><i class="fa fa-calendar"></i><time class="entry-date" datetime="2010-08-08T17:44:12+00:00">8 Ago,  2010</time></li>  
                
                                <li class="category"><i class="fa fa-folder-open-o"></i><a href="../category/programacion/index.html" rel="category tag">Programación</a></li>
                                
                                <li class="tag"><i class="fa fa-tags"></i><a href="../tag/drupal-6/index.html" rel="tag">Drupal 6</a>, <a href="../tag/fapi/index.html" rel="tag">FAPI</a>, <a href="../tag/formularios-multiples/index.html" rel="tag">Formularios multiples</a>, <a href="../tag/hook_forms/index.html" rel="tag">hook_forms()</a><br /> </li>
                
                 
                                    <li class="comments-link">
                        <i class="fa fa-comments-o"></i> <a href="index.html#comments">3 comments</a>                    </li>
                                
                                    <li class="edit-link">
                                             </li>
                            </ul>
        </div> <!--/.entry-meta -->

        <div class="entry-summary">
            <p><a href="../wp-content/uploads/2010/08/fapi_hook_forms.png"><img class="size-full wp-image-543 alignleft" title="FAPI hook_forms() en drupal" src="../wp-content/uploads/2010/08/fapi_hook_forms.png" alt="" width="402" height="286" srcset="http://ecapy.com/wp-content/uploads/2010/08/fapi_hook_forms.png 502w, http://ecapy.com/wp-content/uploads/2010/08/fapi_hook_forms-300x214.png 300w" sizes="(max-width: 402px) 100vw, 402px" /></a></p>
<p>El problema mas común a la hora de querer hacer que un formulario se repita mas de una vez en una misma pagina, es que cada uno de los formularios que se vayan creando van a ser solamente una fiel copia del anterior. Dicho de otra forma, estamos usando un solo formulario pero copiandolo en varios lados de la pagina.</p>
<p>Tuve este problema hace ya mas de un año pero no me olvido lo <strong>JODIDA-MENTE DIFÍCIL</strong> que me fue encontrar una solución, hasta que me di con <a href="http://www.computerminds.co.uk/drupal-6-multiple-instances-same-form-one-page"><strong>esta pagina</strong></a>. Cuestión, que me salvó la vida (exagerado yo?). Por supuesto que les recomiendo que lean el articulo original, pero mas les recomiendo que lean mi interpretación de los hechos que esta mas buena :).</p>
<p>Para este ejemplo primero vamos a crear una url donde poder poner nuestras múltiples instancias:</p>
		<div id="crayon-58443763b56ca993172471" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
&lt; ?php /** * Implementation of hook_menu() * * Solo esta implementada una URL para poder hacer este ejemplo. */ function form_multi_instancias_menu() { $items['form-multiples-instancias'] = array( 'title' =&gt; t('Formulario multi instanciado'),
        'page callback' =&gt; 'form_multiples_instancias',
        'type' =&gt; MENU_NORMAL_ITEM,
        'access callback' =&gt; TRUE,
    );
    return $items;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-58443763b56ca993172471-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56ca993172471-2">2</div><div class="crayon-num" data-line="crayon-58443763b56ca993172471-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56ca993172471-4">4</div><div class="crayon-num" data-line="crayon-58443763b56ca993172471-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56ca993172471-6">6</div><div class="crayon-num" data-line="crayon-58443763b56ca993172471-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-58443763b56ca993172471-1"><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-sy">?</span><span class="crayon-i">php</span><span class="crayon-h"> </span><span class="crayon-c">/** * Implementation of hook_menu() * * Solo esta implementada una URL para poder hacer este ejemplo. */</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">form_multi_instancias_menu</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">$items</span><span class="crayon-sy">[</span><span class="crayon-s">'form-multiples-instancias'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-h"> </span><span class="crayon-s">'title'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">t</span><span class="crayon-sy">(</span><span class="crayon-s">'Formulario multi instanciado'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56ca993172471-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'page callback'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'form_multiples_instancias'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58443763b56ca993172471-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'type'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">MENU_NORMAL_ITEM</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56ca993172471-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'access callback'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">TRUE</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58443763b56ca993172471-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56ca993172471-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$items</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56ca993172471-7"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Y la respectiva función:</p>
		<div id="crayon-58443763b56d8293259611" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
&lt; ?php
/**
 * En este callback de la url queremos crear varias instancias
 * del mismo formulario.
 */
function form_multiples_instancias() {
    $salida = 'Si le hechas una mirada al codigo fuente vas a poder ver que el "form_id" de cada formulario es distinto, asi como el "form_build_id".';
 
    //en este ejemplo simplemente usamos un contador para crear los
    //formularios, pero podriamos estar procesando nodos tranquilamente.
    for ($i = 0; $i &lt; 5; $i++) {
        /*
          * Noten que estoy armando dinamicamente el
          * drupal_get_form(). Lo siguiente equivaldria a hacer:
          * $salida .= drupal_get_form ( "form_ejemplo_0" , 0);
          * $salida .= drupal_get_form ( "form_ejemplo_1" , 1);
          * $salida .= drupal_get_form ( "form_ejemplo_2" , 2);
          * etc...
          */
        $salida .= drupal_get_form("form_ejemplo_" . $i, $i);
    }
 
    return $salida;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-58443763b56d8293259611-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-2">2</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-4">4</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-6">6</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-8">8</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-10">10</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-12">12</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-14">14</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-16">16</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-18">18</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-20">20</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-22">22</div><div class="crayon-num" data-line="crayon-58443763b56d8293259611-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56d8293259611-24">24</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-58443763b56d8293259611-1"><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-sy">?</span><span class="crayon-i">php</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-2"><span class="crayon-c">/**</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-3"><span class="crayon-c"> * En este callback de la url queremos crear varias instancias</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-4"><span class="crayon-c"> * del mismo formulario.</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-5"><span class="crayon-c"> */</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-6"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">form_multiples_instancias</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$salida</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-s">'Si le hechas una mirada al codigo fuente vas a poder ver que el "form_id" de cada formulario es distinto, asi como el "form_build_id".'</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-8"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//en este ejemplo simplemente usamos un contador para crear los</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//formularios, pero podriamos estar procesando nodos tranquilamente.</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-st">for</span><span class="crayon-h"> </span><span class="crayon-sy">(</span><span class="crayon-v">$i</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">$i</span><span class="crayon-h"> </span><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-cn">5</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-v">$i</span><span class="crayon-o">++</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">/*</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-13"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Noten que estoy armando dinamicamente el</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-14"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* drupal_get_form(). Lo siguiente equivaldria a hacer:</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-15"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* $salida .= drupal_get_form ( "form_ejemplo_0" , 0);</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-16"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* $salida .= drupal_get_form ( "form_ejemplo_1" , 1);</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-17"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* $salida .= drupal_get_form ( "form_ejemplo_2" , 2);</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-18"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* etc...</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-19"><span class="crayon-c">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$salida</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">drupal_get_form</span><span class="crayon-sy">(</span><span class="crayon-s">"form_ejemplo_"</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-v">$i</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$i</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-22"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58443763b56d8293259611-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$salida</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56d8293259611-24"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Si van leyendo los comentarios del código se va a ir entendiendo. Definamos el formulario que queremos instanciar:</p>
		<div id="crayon-58443763b56df707720816" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
&lt;?php //Este es un FAPI comun de toda la vida function form_ejemplo($form_state, $i) { $form['un_campo_de_texto'] = array( '#type' =&gt; 'textfield',
        '#title' =&gt; t('Un campo de texto de ejemplo'),
        '#default_value' =&gt; $i,
    );
    $form['submit'] = array(
        '#type' =&gt; 'submit',
        '#value' =&gt; "enviame",
    );
 
    $form['#validate'] = array("form_ejemplo_validate");
    $form['#submit'] = array("form_ejemplo_submit");
    return $form;
}
 
function form_ejemplo_validate($form_state, $form) {
    drupal_set_message("He validado.");
}
 
function form_ejemplo_submit($form_state, $form) {
    drupal_set_message(
        t('Y el formulario enviado fue el Nº @form_number.',
            array(
                '@form_number' =&gt; $form_state ["un_campo_de_texto"] ["#value"])
        )
    );
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-58443763b56df707720816-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-2">2</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-4">4</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-6">6</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-8">8</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-10">10</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-12">12</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-14">14</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-16">16</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-18">18</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-20">20</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-22">22</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-24">24</div><div class="crayon-num" data-line="crayon-58443763b56df707720816-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56df707720816-26">26</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-58443763b56df707720816-1"><span class="crayon-ta">&lt;?php</span><span class="crayon-h"> </span><span class="crayon-c">//Este es un FAPI comun de toda la vida function form_ejemplo($form_state, $i) { $form['un_campo_de_texto'] = array( '#type' =&gt; 'textfield',</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'#title'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">t</span><span class="crayon-sy">(</span><span class="crayon-s">'Un campo de texto de ejemplo'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'#default_value'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$i</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$form</span><span class="crayon-sy">[</span><span class="crayon-s">'submit'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'#type'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'submit'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'#value'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">"enviame"</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-9"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$form</span><span class="crayon-sy">[</span><span class="crayon-s">'#validate'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">"form_ejemplo_validate"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$form</span><span class="crayon-sy">[</span><span class="crayon-s">'#submit'</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-s">"form_ejemplo_submit"</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$form</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-13"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-14"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58443763b56df707720816-15"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">form_ejemplo_validate</span><span class="crayon-sy">(</span><span class="crayon-v">$form_state</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$form</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">drupal_set_message</span><span class="crayon-sy">(</span><span class="crayon-s">"He validado."</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-17"><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-18"><span class="crayon-h"> </span></div><div class="crayon-line" id="crayon-58443763b56df707720816-19"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">form_ejemplo_submit</span><span class="crayon-sy">(</span><span class="crayon-v">$form_state</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$form</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">drupal_set_message</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">t</span><span class="crayon-sy">(</span><span class="crayon-s">'Y el formulario enviado fue el Nº @form_number.'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'@form_number'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-v">$form_state</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"un_campo_de_texto"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"#value"</span><span class="crayon-sy">]</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-58443763b56df707720816-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56df707720816-26"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Bueno bueno bueno&#8230; hasta acá, si ejecutas el script lo que pasaría es que te saldrían tantos warning como formularios se invoquen. Y eso es debido a que no tenemos ningún formulario definido que se llame <strong>form_ejemplo_0</strong>, ni <strong>form_ejemplo_1</strong>, etc.</p>
<p>¿Soluciones?: Crear de la función <strong>form_ejemplo_0()</strong> <strong>para delante</strong> jajaja. No enserio, la solución es implementar el <strong>hook_forms()</strong>, que básicamente va a entender que se esta invocando un formulario inexistente <strong>y va a redireccionarlo a la definición ÚNICA </strong>que tenemos: <strong>form_ejemplo()</strong>.</p>
		<div id="crayon-58443763b56e5447369859" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
&lt; ?php /** * Acá es donde se va a hacer la magia: * Resulta que por cada formulario que se invoca, el * hook_forms() es capaz de actuar como si de un hook_form_alter() * se tratara pero lo hace antes que se termine de armar * el array FAPI mas basico que crea Drupal. * O sea que intercede antes de que se le genere a cada * formulario sus #form_build_id, lo que nos permite * sobreescribir ciertos aspectos como ser la funcion * que alimentará el futuro formulario. */ function form_multi_instancias_forms($form_id, $args) { $forms = array(); //para no cambiarle el callback a todos los formularios //que se creen hacemos un pequeño if. caso contrario //tendriamos un problema GORDO. if (strpos($form_id, 'form_ejemplo_') === 0) { //hemos dado con una de las variantes del formulario que //estamos instanciando, solamente tenemos que apuntar //su callback al formulario que hemos definido. $forms[$form_id] = array('callback' =&gt; 'form_ejemplo');
    }
 
    return $forms;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-58443763b56e5447369859-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56e5447369859-2">2</div><div class="crayon-num" data-line="crayon-58443763b56e5447369859-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-58443763b56e5447369859-4">4</div><div class="crayon-num" data-line="crayon-58443763b56e5447369859-5">5</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-58443763b56e5447369859-1"><span class="crayon-o">&lt;</span><span class="crayon-h"> </span><span class="crayon-sy">?</span><span class="crayon-i">php</span><span class="crayon-h"> </span><span class="crayon-c">/** * Acá es donde se va a hacer la magia: * Resulta que por cada formulario que se invoca, el * hook_forms() es capaz de actuar como si de un hook_form_alter() * se tratara pero lo hace antes que se termine de armar * el array FAPI mas basico que crea Drupal. * O sea que intercede antes de que se le genere a cada * formulario sus #form_build_id, lo que nos permite * sobreescribir ciertos aspectos como ser la funcion * que alimentará el futuro formulario. */</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">form_multi_instancias_forms</span><span class="crayon-sy">(</span><span class="crayon-v">$form_id</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$args</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-h"> </span><span class="crayon-v">$forms</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span><span class="crayon-h"> </span><span class="crayon-c">//para no cambiarle el callback a todos los formularios //que se creen hacemos un pequeño if. caso contrario //tendriamos un problema GORDO. if (strpos($form_id, 'form_ejemplo_') === 0) { //hemos dado con una de las variantes del formulario que //estamos instanciando, solamente tenemos que apuntar //su callback al formulario que hemos definido. $forms[$form_id] = array('callback' =&gt; 'form_ejemplo');</span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56e5447369859-2"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line" id="crayon-58443763b56e5447369859-3"><span class="crayon-h"> </span></div><div class="crayon-line crayon-striped-line" id="crayon-58443763b56e5447369859-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$forms</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-58443763b56e5447369859-5"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Bueno. ya está. este código así, funciona. Les dejo un mini-modulo con lo anterior para que lo vean funcionar. Instalenlo y miren en la URL &#8220;<span style="color: #993300;">/form-multiples-instancias</span>&#8221;</p>
<p><a href="http://www.ecapy.com/Archivos/form_multi_instancias.rar">DESCARGAR</a></p>
        </div> <!-- //.entry-summary -->
            </div>
 

    </div>

</article> <!--/#post-->
                                                     <div class="clearfix post-navigation">
                                <span class="btn-style previous-post pull-left"><a href="../solucion-modulos-y-templates-con-acentos-y-caracteres-mal-codificados/index.html" rel="prev"><i class="fa fa-long-arrow-left"></i> previous article</a></span>                                 <span class="btn-style next-post pull-right"><a href="../hacer-bocadillos-para-comentarios-con-css-puro/index.html" rel="next">next article <i class="fa fa-long-arrow-right"></i></a></span>                            </div> <!-- .post-navigation -->
                                            
                        <div id="comments" class="comments-area comments">
            <h3 class="comments-title">
            3 Comments        </h3>

        <ul class="comment-list">

            		<li class="comment even thread-even depth-1" id="li-comment-206">
			<div id="comment-206" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://0.gravatar.com/avatar/09d54fa5d739814e40edc80855ed6aec?s=80&amp;d=identicon&amp;r=g' srcset='http://0.gravatar.com/avatar/09d54fa5d739814e40edc80855ed6aec?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='http://website/' rel='external nofollow' class='url'>Robert</a></span>							<span class="comment-date">21/09/2010</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Hola Capy, enhorabuena por el artículo, sobre todo la implementación del hook_forms.</p>
<p>He estado probando el módulo y me ha surgido una cuestión la cual no se si es posible realizar. Sería estupendo que me pudiera guiar en como enfocar el tema ya que, Drupal es muy bueno pero a veces se complica mucho para los que no tenemos tantos conocimientos.</p>
<p>El módulo genera los 5 formularios creados mediante la FAPI de Drupal a la perfección. Sin embargo, ¿sería posible sustituirlos por los formularios de creación de nodos?, es decir, el típico &#8220;node_add_form&#8221;. He probado en reemplazar la función que crea los $forms pero no consigo dar con la tecla.<br />
También he conseguido mostrarlos en pantalla pero todos ellos aparecen con el mismo ID lo cual no funcionan las validaciones, etc.</p>
<p>Agradecería mucho su ayuda&#8230; Por lo demás, enhorabuena por el blog.</p>
<p>Robert</p>
						</div>
					</div>
				
			</div>
		<ul class="children">
		<li class="comment byuser comment-author-capynet bypostauthor odd alt depth-2" id="li-comment-207">
			<div id="comment-207" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">Capy</span>							<span class="comment-date">24/09/2010</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Robert como estas. Es complicado de hacer lo que me decis&#8230; ya tuve esa experiencia y me decante por hacer un formulario FAPI de toda la vida y en el submit de ese formulario recojo toda la información en un objeto del tipo $nodo = stdClass(). Después hago un node_save($nodo) y listo.</p>
<p>Lo anterior combinado con este articulo deberia resolver tu problema.</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
		<li class="comment even thread-odd thread-alt depth-1" id="li-comment-208">
			<div id="comment-208" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://0.gravatar.com/avatar/09d54fa5d739814e40edc80855ed6aec?s=80&amp;d=identicon&amp;r=g' srcset='http://0.gravatar.com/avatar/09d54fa5d739814e40edc80855ed6aec?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='http://website/' rel='external nofollow' class='url'>Robert</a></span>							<span class="comment-date">25/09/2010</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Hola Capy, muchas gracias por responderme tan rápido. </p>
<p>He estado estudiando la solución que me propones y quizás se me escapa algo. Creando un formulario FAPI normal, con sus correspondientes campos y luego salvandolo como un nodo; funciona genial.</p>
<p>El problema está en que, si tengo un tipo de contenido diferente, con varios campos (CCK), ¿debería crear el formulario con los mismos campos y repetir el contenido? ¿Crees que se podría capturar los campos del tipo de contenido directamente, con todas sus caracteríticas e incorporarlo en el formulario FAPI?</p>
<p>Estoy hecho un lío&#8230; otra opción quizás podría ser experimentar solo con el hook_forms, pero no acabo de comprender cuales son los parámetros de retorno para alterar los ids de forma aislada.</p>
<p>Qué difícil es a veces Drupal pero a la vez te obliga a ir mejorando. Muchísimas gracias por tu ayuda; los otros artículos publicados en el blog son muy buenos.</p>
<p>Un saludo,<br />
Robert</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
        </ul><!-- .comment-list -->

        
                <p class="no-comments">:).</p>
        
    
    </div>                                            
                    
                        
            </div> <!-- #content -->

            <div id="sidebar" class="col-md-3" role="complementary">
                

	<div class="my-profile clearfix">
		<div class="profile-bg">
						<img class="img-responsive" src="../wp-content/uploads/2016/01/14567-brick-wall-and-wood-floor-1920x1200-abstract-wallpaper.jpg">
			
						<div class="profile-img">
				<img class="img-responsive" src="../wp-content/uploads/2016/01/IMG-20150521-WA0007-1.jpg">
			</div>
					</div>

		<div class="profile-desc">
							<h2>Capy (Marcelo Tosco)</h2>
										<span>Desarrollador web</span>
									<p>Hola!. en mi blog casi siempre escribo sobre informática, pero no te extrañes si algún día aparece un post que no tenga nada que ver a lo que estés acostumbrado ;)</p>
					</div>

		
<div class="social-share">
	
	<ul>
		
			
			<li><a class="twitter" href="http://twitter.com/capynet" target="_blank" ><i class="fa fa-twitter"></i></a></li>
									<li><a class="linkedin" href="https://es.linkedin.com/in/capynet" target="_blank"><i class="fa fa-linkedin"></i></a></li>
											 
		
	</ul>
	
</div>




	</div>

                <div class="sidebar-inner">
                    <aside class="widget-area">
                                            </aside>
                </div>
            </div> <!-- #sidebar -->

        </div> <!-- .row -->
    </section> <!-- .container -->


        <footer id="footer">
        <div class="container">
            <div class="footer">
                <div class="row">
                                            <div class="col-sm-6">
                          <a href="http://asociaciondrupal.es/" target="_blank"><img class="alignnone size-full wp-image-3123" src="../wp-content/uploads/2016/01/miembro-aed_150x75.jpg" alt="miembro-aed_150x75" width="150" height="75" /></a>                        </div>
                    
                                    </div>
            </div>
        </div>
    </footer><!--/#footer-->
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-238596-8', 'auto');
  ga('send', 'pageview');

</script>
<link rel='stylesheet' id='crayon-css'  href='../wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/imagesloaded.min55a0.js?ver=3.2.0'></script>
<script type='text/javascript' src='../wp-includes/js/masonry.mind617.js?ver=3.3.2'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/bootstrap.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.prettyPhoto1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.countdown.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/main1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-includes/js/wp-embed.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/ecapy.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Presiona %s para copiar y %s para pegar","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min2f6a.js?ver=_2.7.2_beta'></script>
</body>

<!-- Mirrored from ecapy.com/multiples-instancias-formulario-en-drupal-6/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:36:38 GMT -->
</html>