<!DOCTYPE html>
<html lang="es-ES">

<!-- Mirrored from ecapy.com/setear-y-recuperar-fields-de-apache-solr/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:31:49 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Capy |   Setear y recuperar fields de Apache Solr en Drupal (y PHP en general)</title>
			<link rel="shortcut icon" href="../wp-content/uploads/2016/01/1454276298_globe-01.png" type="image/x-icon"/>
		<link rel="stylesheet" type="text/css" href="#">

	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://ecapy.com/wp-content/themes/prolog/js/html5.js"></script>
	<![endif]-->

	<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Feed" href="../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; RSS de los comentarios" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Setear y recuperar fields de Apache Solr en Drupal (y PHP en general) RSS de los comentarios" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/ecapy.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-theme-sublime-text-css'  href='../wp-content/plugins/crayon-syntax-highlighter/themes/sublime-text/sublime-text2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='../wp-content/plugins/crayon-syntax-highlighter/fonts/monaco2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='thm-style-css'  href='../wp-content/themes/prolog/style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='../wp-content/themes/prolog/css/font-awesome.min1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='quick-style-css'  href='../wp-content/themes/prolog/quick-style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='themeum-preset-css'  href='../wp-content/themes/prolog/css/presets/preset31c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='redux-google-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%7CRoboto+Slab%3A100%2C300%2C400%2C700&amp;ver=1454375832' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Montar una carpeta compartida en un linux instalado en Virtual Box' href='../montar-una-carpeta-compartida-en-un-linux-instalado-en-virtual-box/index.html' />
<link rel='next' title='Aplicar sombra sólida a un div con CSS en Internet Explorer' href='../aplicar-sombra-solida-a-un-div-con-css-en-internet-explorer/index.html' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../indexe145.html?p=409' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embedb1eb.json?url=http%3A%2F%2Fecapy.com%2Fsetear-y-recuperar-fields-de-apache-solr%2F" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed0ab4?url=http%3A%2F%2Fecapy.com%2Fsetear-y-recuperar-fields-de-apache-solr%2F&amp;format=xml" />
<style type="text/css" title="dynamic-css" class="options-output">body, p{font-family:Open Sans;font-weight:normal;font-style:normal;color:#1a1a1a;font-size:16px;}h1, h2, h3, h4, h5, h6{font-family:Roboto Slab;font-weight:400;font-style:normal;color:#1a1a1a;}#navigation .navbar-nav > li > a, .navbar-main .dropdown-menu > li > a{font-family:Open Sans;font-weight:normal;font-style:normal;color:#777777;font-size:16px;}</style></head>

<body class="single single-post postid-409 single-format-standard">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header header" role="banner">
			<div class="container">
				<div id="navigation" class="navbar navbar-default">
                    <div class="row">
                        <div class="col-sm-3">
        					<div class="navbar-header">
        						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        						</button>
        	                    <a class="navbar-brand" href="../index.html">
        	                    	<h1 class="logo-wrapper">
        		                    	Capy        		                    </h1>
        		                </a>
        					</div>
                        </div>

                        <div id="main-menu" class="col-sm-9">
                            <div class="hidden-xs">
                                <ul id="menu-principal" class="nav navbar-nav navbar-main"><li id="menu-item-2961" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2961"><a title="Drupal" href="../category/drupal/index.html"><span class="fa fa-drupal"></span>&nbsp;Drupal</a></li>
<li id="menu-item-2959" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li id="menu-item-2958" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2958"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li id="menu-item-2960" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/#main-menu-->

                        <div id="mobile-menu" class="visible-xs">
                            <div class="collapse navbar-collapse">
                                <ul id="menu-principal-1" class="nav navbar-nav"><li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2961"><a title="Drupal" href="../category/drupal/index.html"><span class="glyphicon drupal"></span>&nbsp;Drupal</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2958 active"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/.#mobile-menu-->

                    </div><!--/.row--> 
				</div><!--/.container--> 
			</div>
		</header><!--/#header-->


    <section id="main" class="container">
        <div class="row">
            <div id="content" class="site-content col-md-9" role="main">

                
                    
                        <article id="post-409" class="post-409 post type-post status-publish format-standard has-post-thumbnail hentry category-php tag-apache-solr tag-drupal-6">
    <header class="entry-header">

            <div class="entry-thumbnail">
            <img width="850" height="253" src="../wp-content/uploads/2015/07/drupal-header.jpg" class="img-responsive wp-post-image" alt="drupal-header" srcset="http://ecapy.com/wp-content/uploads/2015/07/drupal-header.jpg 850w, http://ecapy.com/wp-content/uploads/2015/07/drupal-header-300x89.jpg 300w, http://ecapy.com/wp-content/uploads/2015/07/drupal-header-768x229.jpg 768w" sizes="(max-width: 850px) 100vw, 850px" />        </div>
    
    </header> <!--/.entry-header -->

    <div class="clearfix post-content media">
        <div class="pull-left">
            <h4 class="post-format">
                <i class="fa fa-thumb-tack"></i>
            </h4>

        </div>
    

    <div class="media-body">
        <h2 class="entry-title">
            <a href="index.html" rel="bookmark">Setear y recuperar fields de Apache Solr en Drupal (y PHP en general)</a>
                    </h2> <!-- //.entry-title -->

        <div class="clearfix entry-meta">
            <ul>
                                <li class="author"> <i class="fa fa-user"></i> <a href="../author/capynet/index.html" title="Entradas de capynet" rel="author">capynet</a></li> 
                
                                <li class="publish-date"><i class="fa fa-calendar"></i><time class="entry-date" datetime="2010-05-19T09:13:38+00:00">19 May,  2010</time></li>  
                
                                <li class="category"><i class="fa fa-folder-open-o"></i><a href="../category/php/index.html" rel="category tag">PHP</a></li>
                                
                                <li class="tag"><i class="fa fa-tags"></i><a href="../tag/apache-solr/index.html" rel="tag">Apache Solr</a>, <a href="../tag/drupal-6/index.html" rel="tag">Drupal 6</a><br /> </li>
                
                 
                                    <li class="comments-link">
                        <i class="fa fa-comments-o"></i> <a href="index.html#comments">2 comments</a>                    </li>
                                
                                    <li class="edit-link">
                                             </li>
                            </ul>
        </div> <!--/.entry-meta -->

        <div class="entry-summary">
            <p>Voy a partir de la premisa de que ya tenemos un apache solr corriendo y un drupal con el modulo configurado.</p>
<p>Dicho lo anterior, se nos plantea la siguiente pregunta: <strong>¿Cómo hago para tomar un dato relacionado a un nodo, se lo paso a solr para que lo indexe como un field en el documento de solr y luego lo recupero junto a los documentos/resultados de una búsqueda?</strong></p>
<p>Aunque parezca mentira, es mas bien fácil de hacer, pero si les pasa como a mi, seguramente gasten una horita en conseguir este dato, porque no es un tema extensamente documentado Solr + Drupal.</p>
<p><span style="text-decoration: underline;">1) Agregar un dato X a un field de un documento:</span></p>
<p>Para este primer paso apelamos al hook hook_apachesolr_update_index(). ¿que hace?, nos da la oportunidad de agregar o quitar información al documento que se esta por enviar a solr, y ya puestos, nos manda el nodo del cual se extrajo la información para sacar de ahi (o de cualquier otro lado) información extra. (esto nos evita tener que hacer un node_load() ).</p>
		<div id="crayon-5844368f7ad60146552403" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
/**
 * Implementarion of hook_apachesolr_update_index()
 * */
function mimodulo_apachesolr_update_index(&amp;$documentoSolr, $node) {
    //Por aca obtenemos informacion extra
    $documentoSolr-&gt;addField('is_apellido_de_creador', $apellido_creador);
    $documentoSolr-&gt;addField('is_edad_creador', $edad_creador);
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-5844368f7ad60146552403-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368f7ad60146552403-2">2</div><div class="crayon-num" data-line="crayon-5844368f7ad60146552403-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368f7ad60146552403-4">4</div><div class="crayon-num" data-line="crayon-5844368f7ad60146552403-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368f7ad60146552403-6">6</div><div class="crayon-num" data-line="crayon-5844368f7ad60146552403-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368f7ad60146552403-8">8</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5844368f7ad60146552403-1"><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368f7ad60146552403-2"><span class="crayon-c"> * Implementarion of hook_apachesolr_update_index()</span></div><div class="crayon-line" id="crayon-5844368f7ad60146552403-3"><span class="crayon-c"> * */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368f7ad60146552403-4"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">mimodulo_apachesolr_update_index</span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-v">$documentoSolr</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$node</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5844368f7ad60146552403-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//Por aca obtenemos informacion extra</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368f7ad60146552403-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$documentoSolr</span><span class="crayon-o">-&gt;</span><span class="crayon-e">addField</span><span class="crayon-sy">(</span><span class="crayon-s">'is_apellido_de_creador'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$apellido_creador</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5844368f7ad60146552403-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$documentoSolr</span><span class="crayon-o">-&gt;</span><span class="crayon-e">addField</span><span class="crayon-sy">(</span><span class="crayon-s">'is_edad_creador'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$edad_creador</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368f7ad60146552403-8"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Arriba no hay mucho que aclarar, básicamente por medio del método <strong>addField() seteo un par de  nuevos field (<span style="color: #ff6600;">is_apellido_creador </span>y <span style="color: #ff6600;">is_edad_creador</span>)</strong> asignandoles un valor que anteriormente habre recogido de algun lugar.</p>
<p><strong>NOTA</strong>: Mucha atención al prefijo que usé en los nombres de los field (&#8220;<strong>is_</strong>&#8220;). No lo hice por que si, sino porque en el schema.xml los creadores del modulo de drupal han predefinido una serie de prefijos para las filas dinámicas como las que estamos creando. Dicho de otra forma, si no usamos uno de los prefijos definidos en schema.xml, los field no se van a indexar.</p>
<p><span style="text-decoration: underline;">2) Pedir un field a Solr:</span></p>
<p>Solr puede tener en un documento cualquier cantidad de fields almacenados en su interior, lo que no quiere decir que en cada resultado de una busqueda se vayan a incluir todos estos field&#8230; imaginarán que la performance no se basa justamente en la premisa de &#8220;<span style="color: #ff6600;">mandame todo lo que tengas que ya veré yo que es lo que me hace falta</span>&#8220;. Mas bien hay que decirle a Solr en la consulta, que es lo que necesitas recibir de un documento de la siguiente manera:</p>
		<div id="crayon-5844368f7ad70263658002" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
/**
 * Implementarion of hook_apachesolr_prepare_query()
 */
function mimodulo_apachesolr_prepare_query(&amp;$query, &amp;$params, $caller) {
    //concatenamos los nuevs campos a la peticion.
    $params ["fl"] = $params ["fl"] . ", is_apellido_de_creador, is_edad_de_creador";
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-5844368f7ad70263658002-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368f7ad70263658002-2">2</div><div class="crayon-num" data-line="crayon-5844368f7ad70263658002-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368f7ad70263658002-4">4</div><div class="crayon-num" data-line="crayon-5844368f7ad70263658002-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-5844368f7ad70263658002-6">6</div><div class="crayon-num" data-line="crayon-5844368f7ad70263658002-7">7</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-5844368f7ad70263658002-1"><span class="crayon-c">/**</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368f7ad70263658002-2"><span class="crayon-c"> * Implementarion of hook_apachesolr_prepare_query()</span></div><div class="crayon-line" id="crayon-5844368f7ad70263658002-3"><span class="crayon-c"> */</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368f7ad70263658002-4"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">mimodulo_apachesolr_prepare_query</span><span class="crayon-sy">(</span><span class="crayon-o">&amp;</span><span class="crayon-v">$query</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">$params</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-v">$caller</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-5844368f7ad70263658002-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">//concatenamos los nuevs campos a la peticion.</span></div><div class="crayon-line crayon-striped-line" id="crayon-5844368f7ad70263658002-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$params</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"fl"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-v">$params</span><span class="crayon-h"> </span><span class="crayon-sy">[</span><span class="crayon-s">"fl"</span><span class="crayon-sy">]</span><span class="crayon-h"> </span><span class="crayon-sy">.</span><span class="crayon-h"> </span><span class="crayon-s">", is_apellido_de_creador, is_edad_de_creador"</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-5844368f7ad70263658002-7"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Como pueden ver, lo que hago aquí es sumarle a <strong>&#8220;fl&#8221;</strong> dos campos más. <strong>&#8220;fl&#8221;</strong> es justamente la clave que almacena todos los field que le vamos a pedir a Solr.</p>
<p>Listo, ya podemos setear y recuperar fields. Solo queda que modifiques la pagina de resultados para poder imprimir cada uno de los nuevos field que recibiste, pero esa es otra historia.</p>
<address>Concepto original extraído de:<br />
http://www.agileapproach.com/blog-entry/filtering-apache-solr-search-results-based-drupal-user-permissions</address>
        </div> <!-- //.entry-summary -->
            </div>
 

    </div>

</article> <!--/#post-->
                                                     <div class="clearfix post-navigation">
                                <span class="btn-style previous-post pull-left"><a href="../montar-una-carpeta-compartida-en-un-linux-instalado-en-virtual-box/index.html" rel="prev"><i class="fa fa-long-arrow-left"></i> previous article</a></span>                                 <span class="btn-style next-post pull-right"><a href="../aplicar-sombra-solida-a-un-div-con-css-en-internet-explorer/index.html" rel="next">next article <i class="fa fa-long-arrow-right"></i></a></span>                            </div> <!-- .post-navigation -->
                                            
                        <div id="comments" class="comments-area comments">
            <h3 class="comments-title">
            2 Comments        </h3>

        <ul class="comment-list">

            		<li class="comment even thread-even depth-1" id="li-comment-146">
			<div id="comment-146" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://0.gravatar.com/avatar/9d75d9700221394c8e6337d3011b6d02?s=80&amp;d=identicon&amp;r=g' srcset='http://0.gravatar.com/avatar/9d75d9700221394c8e6337d3011b6d02?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author"><a href='http://www.tutorialesvirtuales.com/' rel='external nofollow' class='url'>roosvelt</a></span>							<span class="comment-date">11/11/2010</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Saludos a todos&#8230;mi pregunta es como puedo hacer para indexar campos de cck en apache solr&#8230;creo un campo con solr y quiero indexarlo en Apache solr..cual seria la mejor manera? Mil Gracias</p>
						</div>
					</div>
				
			</div>
		<ul class="children">
		<li class="comment byuser comment-author-capynet bypostauthor odd alt depth-2" id="li-comment-147">
			<div id="comment-147" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/d6c12e6d5158c740bf4e9dcddbf667f6?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">Capy</span>							<span class="comment-date">13/11/2010</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Segun la documentacion del modulo:</p>
<p>hook_apachesolr_cck_fields_alter(&amp;$mappings)</p>
<p>  Add or alter index mappings for CCK types.  The default mappings array handles just<br />
  text fields with option widgets:</p>
<p>    $mappings[&#8216;text&#8217;] = array(<br />
      &#8216;optionwidgets_select&#8217; =&gt; array(&#8216;callback&#8217; =&gt; &#8221;, &#8216;index_type&#8217; =&gt; &#8216;string&#8217;),<br />
      &#8216;optionwidgets_buttons&#8217; =&gt; array(&#8216;callback&#8217; =&gt; &#8221;, &#8216;index_type&#8217; =&gt; &#8216;string&#8217;)<br />
    );</p>
<p>  In your _alter hook implementation you can add additional field types such as:</p>
<p>    $mappings[&#8216;number_integer&#8217;][&#8216;number&#8217;] = array(&#8216;callback&#8217; =&gt; &#8221;, &#8216;index_type&#8217; =&gt; &#8216;integer&#8217;);</p>
<p>  You can allso add a mapping for a specific field.  This will take precedence over any<br />
  mapping for a general field type. A field-specific mapping would look like:</p>
<p>    $mappings[&#8216;per-field&#8217;][&#8216;field_model_name&#8217;] = array(&#8216;callback&#8217; =&gt; &#8221;, &#8216;index_type&#8217; =&gt; &#8216;string&#8217;);</p>
<p>  or</p>
<p>    $mappings[&#8216;per-field&#8217;][&#8216;field_model_price&#8217;] = array(&#8216;callback&#8217; =&gt; &#8221;, &#8216;index_type&#8217; =&gt; &#8216;float&#8217;);</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
</ul><!-- .children -->
</li><!-- #comment-## -->
        </ul><!-- .comment-list -->

        
                <p class="no-comments">:).</p>
        
    
    </div>                                            
                    
                        
            </div> <!-- #content -->

            <div id="sidebar" class="col-md-3" role="complementary">
                

	<div class="my-profile clearfix">
		<div class="profile-bg">
						<img class="img-responsive" src="../wp-content/uploads/2016/01/14567-brick-wall-and-wood-floor-1920x1200-abstract-wallpaper.jpg">
			
						<div class="profile-img">
				<img class="img-responsive" src="../wp-content/uploads/2016/01/IMG-20150521-WA0007-1.jpg">
			</div>
					</div>

		<div class="profile-desc">
							<h2>Capy (Marcelo Tosco)</h2>
										<span>Desarrollador web</span>
									<p>Hola!. en mi blog casi siempre escribo sobre informática, pero no te extrañes si algún día aparece un post que no tenga nada que ver a lo que estés acostumbrado ;)</p>
					</div>

		
<div class="social-share">
	
	<ul>
		
			
			<li><a class="twitter" href="http://twitter.com/capynet" target="_blank" ><i class="fa fa-twitter"></i></a></li>
									<li><a class="linkedin" href="https://es.linkedin.com/in/capynet" target="_blank"><i class="fa fa-linkedin"></i></a></li>
											 
		
	</ul>
	
</div>




	</div>

                <div class="sidebar-inner">
                    <aside class="widget-area">
                                            </aside>
                </div>
            </div> <!-- #sidebar -->

        </div> <!-- .row -->
    </section> <!-- .container -->


        <footer id="footer">
        <div class="container">
            <div class="footer">
                <div class="row">
                                            <div class="col-sm-6">
                          <a href="http://asociaciondrupal.es/" target="_blank"><img class="alignnone size-full wp-image-3123" src="../wp-content/uploads/2016/01/miembro-aed_150x75.jpg" alt="miembro-aed_150x75" width="150" height="75" /></a>                        </div>
                    
                                    </div>
            </div>
        </div>
    </footer><!--/#footer-->
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-238596-8', 'auto');
  ga('send', 'pageview');

</script>
<link rel='stylesheet' id='crayon-css'  href='../wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/imagesloaded.min55a0.js?ver=3.2.0'></script>
<script type='text/javascript' src='../wp-includes/js/masonry.mind617.js?ver=3.3.2'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/bootstrap.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.prettyPhoto1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.countdown.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/main1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-includes/js/wp-embed.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/ecapy.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Presiona %s para copiar y %s para pegar","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min2f6a.js?ver=_2.7.2_beta'></script>
</body>

<!-- Mirrored from ecapy.com/setear-y-recuperar-fields-de-apache-solr/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:31:52 GMT -->
</html>