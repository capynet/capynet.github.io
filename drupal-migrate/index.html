<!DOCTYPE html>
<html lang="es-ES">

<!-- Mirrored from ecapy.com/drupal-migrate/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:34:28 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Capy |   Drupal: Migrate</title>
			<link rel="shortcut icon" href="../wp-content/uploads/2016/01/1454276298_globe-01.png" type="image/x-icon"/>
		<link rel="stylesheet" type="text/css" href="#">

	<link rel="profile" href="http://gmpg.org/xfn/11">
	<link rel="pingback" href="../xmlrpc.php">
	<!--[if lt IE 9]>
	<script src="http://ecapy.com/wp-content/themes/prolog/js/html5.js"></script>
	<![endif]-->

	<link rel='dns-prefetch' href='http://fonts.googleapis.com/' />
<link rel='dns-prefetch' href='http://s.w.org/' />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Feed" href="../feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; RSS de los comentarios" href="../comments/feed/index.html" />
<link rel="alternate" type="application/rss+xml" title="Capy &raquo; Drupal: Migrate RSS de los comentarios" href="feed/index.html" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/ecapy.com\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='crayon-theme-sublime-text-css'  href='../wp-content/plugins/crayon-syntax-highlighter/themes/sublime-text/sublime-text2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='crayon-font-monaco-css'  href='../wp-content/plugins/crayon-syntax-highlighter/fonts/monaco2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<link rel='stylesheet' id='thm-style-css'  href='../wp-content/themes/prolog/style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='font-awesome-css'  href='../wp-content/themes/prolog/css/font-awesome.min1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='quick-style-css'  href='../wp-content/themes/prolog/quick-style1c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='themeum-preset-css'  href='../wp-content/themes/prolog/css/presets/preset31c9b.css?ver=4.6.1' type='text/css' media='all' />
<link rel='stylesheet' id='redux-google-fonts-css'  href='http://fonts.googleapis.com/css?family=Open+Sans%7CRoboto+Slab%3A100%2C300%2C400%2C700&amp;ver=1454375832' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/jquery/jqueryb8ff.js?ver=1.12.4'></script>
<script type='text/javascript' src='../wp-includes/js/jquery/jquery-migrate.min330a.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='../wp-json/index.html' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../xmlrpc0db0.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Drupal: conectar a una base de datos externa al vuelo' href='../drupal-conectar-a-una-base-de-datos-externa-al-vuelo/index.html' />
<link rel='next' title='Drupal: Importar y sincronizar desde una DB con Migrate' href='../drupal-importar-y-sincronizar-desde-una-db-con-migrate/index.html' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="index.html" />
<link rel='shortlink' href='../indexee49.html?p=2265' />
<link rel="alternate" type="application/json+oembed" href="../wp-json/oembed/1.0/embed1969.json?url=http%3A%2F%2Fecapy.com%2Fdrupal-migrate%2F" />
<link rel="alternate" type="text/xml+oembed" href="../wp-json/oembed/1.0/embed0443?url=http%3A%2F%2Fecapy.com%2Fdrupal-migrate%2F&amp;format=xml" />
<style type="text/css" title="dynamic-css" class="options-output">body, p{font-family:Open Sans;font-weight:normal;font-style:normal;color:#1a1a1a;font-size:16px;}h1, h2, h3, h4, h5, h6{font-family:Roboto Slab;font-weight:400;font-style:normal;color:#1a1a1a;}#navigation .navbar-nav > li > a, .navbar-main .dropdown-menu > li > a{font-family:Open Sans;font-weight:normal;font-style:normal;color:#777777;font-size:16px;}</style></head>

<body class="single single-post postid-2265 single-format-standard">
	<div id="page" class="hfeed site">
		<header id="masthead" class="site-header header" role="banner">
			<div class="container">
				<div id="navigation" class="navbar navbar-default">
                    <div class="row">
                        <div class="col-sm-3">
        					<div class="navbar-header">
        						<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        							<span class="icon-bar"></span>
        						</button>
        	                    <a class="navbar-brand" href="../index.html">
        	                    	<h1 class="logo-wrapper">
        		                    	Capy        		                    </h1>
        		                </a>
        					</div>
                        </div>

                        <div id="main-menu" class="col-sm-9">
                            <div class="hidden-xs">
                                <ul id="menu-principal" class="nav navbar-nav navbar-main"><li id="menu-item-2961" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2961"><a title="Drupal" href="../category/drupal/index.html"><span class="fa fa-drupal"></span>&nbsp;Drupal</a></li>
<li id="menu-item-2959" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li id="menu-item-2958" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2958"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li id="menu-item-2960" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/#main-menu-->

                        <div id="mobile-menu" class="visible-xs">
                            <div class="collapse navbar-collapse">
                                <ul id="menu-principal-1" class="nav navbar-nav"><li class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-2961 active"><a title="Drupal" href="../category/drupal/index.html"><span class="glyphicon drupal"></span>&nbsp;Drupal</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2959"><a title="CSS y Maquetación" href="../category/css-y-maquetacion/index.html">CSS y Maquetación</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2958"><a title="PHP" href="../category/php/index.html">PHP</a></li>
<li class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-2960"><a title="Javascript" href="../category/js/index.html">Javascript</a></li>
</ul>                            </div>
                        </div><!--/.#mobile-menu-->

                    </div><!--/.row--> 
				</div><!--/.container--> 
			</div>
		</header><!--/#header-->


    <section id="main" class="container">
        <div class="row">
            <div id="content" class="site-content col-md-9" role="main">

                
                    
                        <article id="post-2265" class="post-2265 post type-post status-publish format-standard has-post-thumbnail hentry category-drupal tag-drupal tag-drupal-7 tag-migraciones tag-programacion">
    <header class="entry-header">

            <div class="entry-thumbnail">
            <img width="850" height="253" src="../wp-content/uploads/2015/07/drupal-header.jpg" class="img-responsive wp-post-image" alt="drupal-header" srcset="http://ecapy.com/wp-content/uploads/2015/07/drupal-header.jpg 850w, http://ecapy.com/wp-content/uploads/2015/07/drupal-header-300x89.jpg 300w, http://ecapy.com/wp-content/uploads/2015/07/drupal-header-768x229.jpg 768w" sizes="(max-width: 850px) 100vw, 850px" />        </div>
    
    </header> <!--/.entry-header -->

    <div class="clearfix post-content media">
        <div class="pull-left">
            <h4 class="post-format">
                <i class="fa fa-thumb-tack"></i>
            </h4>

        </div>
    

    <div class="media-body">
        <h2 class="entry-title">
            <a href="index.html" rel="bookmark">Drupal: Migrate</a>
                    </h2> <!-- //.entry-title -->

        <div class="clearfix entry-meta">
            <ul>
                                <li class="author"> <i class="fa fa-user"></i> <a href="../author/capynet/index.html" title="Entradas de capynet" rel="author">capynet</a></li> 
                
                                <li class="publish-date"><i class="fa fa-calendar"></i><time class="entry-date" datetime="2013-06-12T20:06:54+00:00">12 Jun,  2013</time></li>  
                
                                <li class="category"><i class="fa fa-folder-open-o"></i><a href="../category/drupal/index.html" rel="category tag">Drupal</a></li>
                                
                                <li class="tag"><i class="fa fa-tags"></i><a href="../tag/drupal/index.html" rel="tag">Drupal</a>, <a href="../tag/drupal-7/index.html" rel="tag">Drupal 7</a>, <a href="../tag/migraciones/index.html" rel="tag">Migraciones</a>, <a href="../tag/programacion/index.html" rel="tag">Programación</a><br /> </li>
                
                 
                                    <li class="comments-link">
                        <i class="fa fa-comments-o"></i> <a href="index.html#comments">4 comments</a>                    </li>
                                
                                    <li class="edit-link">
                                             </li>
                            </ul>
        </div> <!--/.entry-meta -->

        <div class="entry-summary">
            <p><a href="https://drupal.org/project/migrate" target="_blank">Migrate</a> es genial, a resumidas cuentas te permite importar información desde varias fuentes. Así de simple.<br />
En este post voy tocar dos cosas muy por encima. Qué puede importar y como implementar Migrate (este modulo no importa nada por si mismo)</p>
<p>Primero lo primero:</p>
<h3>¿Desde donde te deja importar información?</h3>
<ul>
<li><a title="Drupal: Importar y sincronizar desde una DB con Migrate" href="../drupal-importar-y-sincronizar-desde-una-db-con-migrate/index.html">SQL</a> (Cualquier DB que Drupal sea capaz de leer)</li>
<li><a title="Drupal: Importar y sincronizar desde un XML local o remoto con Migrate" href="../drupal-importar-y-sincronizar-desde-un-xml-local-o-remoto-con-migrate/index.html">XML</a></li>
<li>List</li>
<li><a title="Drupal: Importar y sincronizar desde un CSV con Migrate" href="../drupal-importar-y-sincronizar-desde-un-csv-con-migrate/index.html">CSV</a></li>
<li><a title="Drupal: Importar y sincronizar desde un JSON local o remoto con Migrate" href="../drupal-importar-y-sincronizar-desde-un-json-local-o-remoto-con-migrate/index.html">JSON</a></li>
<li>MSSQL (Microsoft SQL Server)</li>
<li>Oracle</li>
<li>Multi items</li>
</ul>
<p>Y esas son las fuentes que provee Migrate, pero <a href="https://drupal.org/node/1152164" target="_blank">cualquier módulo puede añadir nuevas fuentes</a> sin mayor problema. pueden ver en detalle cada una de las clases que implementa los sources en <a href="https://drupal.org/node/1006986" target="_blank">https://drupal.org/node/1006986</a></p>
<h3>¿Que puede crear con la información que importa?</h3>
<ul>
<li>Nodos</li>
<li>Comentarios</li>
<li>Archivos</li>
<li>Menus</li>
<li>Items de menu</li>
<li>Roles</li>
<li>Tablas en la DB</li>
<li>Terminos</li>
<li>Usuarios</li>
</ul>
<p>Y una vez mas esas son las fuentes que provee Migrate, pero cualquier módulo puede añadir nuevos destinos. por ejemplo algun modulo puede proveer la implementación para crear profiles de Profile2. La información en detalle de cada una de las clases que implementan estos &#8220;destinos&#8221; la pueden ver en <a href="https://drupal.org/node/1006988" target="_blank">https://drupal.org/node/1006988</a></p>
<p>Ok ahora vamos a implementar Migrate en un módulo. Para hacerlo no puede ser más fácil. <strong>Solo necesitas 2 cosas</strong>: un hook y extender de una clase<br />
Nuestro módulo de ejemplo se llama &#8220;<em>migrate_posts</em>&#8221; que va a copiar todos los posts que hay en mi blog (WordPress) usando como fuente la DB (El source es SQL en este caso)</p>
<p>La onda en la siguiente:<br />
Primero tenemos que crear un archivo <em>migrate_posts.module</em> y dentro de él definir el <em>hook_migrate_api()</em> que es el que le da la información necesaria a Migrate sobre nuestra implementación:</p>
		<div id="crayon-584436cbdaef7417908998" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
/** * Implements hook_migrate_api(). */
function migrate_posts_migrate_api() {
  $api = array(
    'api' =&gt; 2,
    'groups' =&gt; array(
      'wordpress' =&gt; array(
        'title' =&gt; t('Importación de posts desde WordPress'),
      ),
    ),
    'migrations' =&gt; array(
      'WPFromDB' =&gt; array(
        'class_name' =&gt; 'WPMigrationFromDB',
        'group_name' =&gt; 'wordpress',
      ),
    ),
  );
  return $api;
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-2">2</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-4">4</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-6">6</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-8">8</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-10">10</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-12">12</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-14">14</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-16">16</div><div class="crayon-num" data-line="crayon-584436cbdaef7417908998-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaef7417908998-18">18</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaef7417908998-1"><span class="crayon-c">/** * Implements hook_migrate_api(). */</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-2"><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">migrate_posts_migrate_api</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-3"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-v">$api</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-4"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'api'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-cn">2</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'groups'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'wordpress'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'title'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-e">t</span><span class="crayon-sy">(</span><span class="crayon-s">'Importación de posts desde WordPress'</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'migrations'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'WPFromDB'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'class_name'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'WPMigrationFromDB'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'group_name'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'wordpress'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-14"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-16"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-584436cbdaef7417908998-17"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-k ">return</span><span class="crayon-h"> </span><span class="crayon-v">$api</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaef7417908998-18"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>El HOOK necesita 3 cosas:<br />
<strong>Que le digas que API vas a usar</strong> (Siempre es la 2 salvo que cuando leas este artículo hayan sacado la versión 3.x del módulo). <strong>Que le indiques un grupo</strong> y por ultimo <strong>que le indiques cual es tu migrator</strong></p>
<p>Desglosemos esto:<br />
Un grupo es simplemente un &#8220;tag&#8221; donde vas a agrupar todos los migrators que vos créas conveniente. Por ejemplo, si quisieras crear un importador de posts y otro importador a parte para los comentarios, entonces meterías los dos migrators dentro del grupo de &#8220;wordpress&#8221;.<br />
En &#8220;migrations&#8221; definimos el nombre máquina de nuestro importador (WPFromDB), el nombre de la clase que va a realizar la acción (WPMigrationFromDB) y el grupo al que pertenece.</p>
<p>Lo último que queda por aclarar es que &#8220;migrate_posts<em>.migrate.inc</em>&#8221; es la convención que usa Migrate, por lo que no hace falta hacer un require/include en tu .module</p>
<p>Ya hemos terminado con el primer paso, vamos al segundo. La clase de importacion.<br />
Creamos un archivo .inc que es el que va a contener la clase. por ejemplo &#8220;posts-migrator-from-db.inc&#8221; y en el .info de tu modulo lo agregas (files[] = posts-migrator-from-db.inc)<br />
Y dentro de él ponemos la clase:</p>
		<div id="crayon-584436cbdaf0e694629253" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
class WPMigrationFromDB extends Migration {
  public function __construct($arguments) {
    parent::__construct($arguments);

    // #############################################
    // Definición del source (desde donde vamos a obtener la información)
    Database::addConnectionInfo('temporal', 'MI_DB', array(
      'driver' =&gt; 'mysql',
      'database' =&gt; 'MI_DB',
      'username' =&gt; 'USUARIO',
      'password' =&gt; 'CONTRASEÑA',
      'host' =&gt; 'localhost',
    ));

    $query = Database::getConnection('MI_DB', 'temporal')
      -&gt;select('wp_posts', 'posts')
      -&gt;fields('posts', array(
        'id',
        'post_date',
        'post_modified',
        'post_title',
        'post_content',
      ))
      -&gt;condition("post_type", "post", "=")
      -&gt;condition("post_status", "publish", "=");

    $this-&gt;source = new MigrateSourceSQL($query);

    // #############################################
    // Definición del destino (lo que se va a crear con los datos conseguidos)
    $this-&gt;destination = new MigrateDestinationNode('page');

    // #############################################
    // Indicamos cual es el identificador UNICO de cada elemento que se consiga desde la fuente
    $this-&gt;map = new MigrateSQLMap($this-&gt;machineName,
      array(
        'id' =&gt; array(
          'type' =&gt; 'int',
          'unsigned' =&gt; TRUE,
          'not null' =&gt; TRUE,
        )
      ),
      MigrateDestinationNode::getKeySchema()
    );

    // #############################################
    // Mapeo de los valores del origen y destino
    $this-&gt;addFieldMapping('uid')-&gt;defaultValue(1);
    $this-&gt;addFieldMapping('created', 'post_date');
    $this-&gt;addFieldMapping('changed', 'post_modified');
    $this-&gt;addFieldMapping('title', 'post_title');
    $this-&gt;addFieldMapping('body', 'post_content');
  }
}</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-2">2</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-4">4</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-5">5</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-6">6</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-7">7</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-8">8</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-9">9</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-10">10</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-11">11</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-12">12</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-13">13</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-14">14</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-15">15</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-16">16</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-17">17</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-18">18</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-19">19</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-20">20</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-21">21</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-22">22</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-23">23</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-24">24</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-25">25</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-26">26</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-27">27</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-28">28</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-29">29</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-30">30</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-31">31</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-32">32</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-33">33</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-34">34</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-35">35</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-36">36</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-37">37</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-38">38</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-39">39</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-40">40</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-41">41</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-42">42</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-43">43</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-44">44</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-45">45</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-46">46</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-47">47</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-48">48</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-49">49</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-50">50</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-51">51</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-52">52</div><div class="crayon-num" data-line="crayon-584436cbdaf0e694629253-53">53</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf0e694629253-54">54</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaf0e694629253-1"><span class="crayon-t">class</span><span class="crayon-h"> </span><span class="crayon-e">WPMigrationFromDB</span><span class="crayon-h"> </span><span class="crayon-r">extends</span><span class="crayon-h"> </span><span class="crayon-e">Migration</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-2"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-m">public</span><span class="crayon-h"> </span><span class="crayon-t">function</span><span class="crayon-h"> </span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-v">$arguments</span><span class="crayon-sy">)</span><span class="crayon-h"> </span><span class="crayon-sy">{</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-3"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-r">parent</span><span class="crayon-o">::</span><span class="crayon-e">__construct</span><span class="crayon-sy">(</span><span class="crayon-v">$arguments</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-4">&nbsp;</div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-5"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// #############################################</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-6"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Definición del source (desde donde vamos a obtener la información)</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-7"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">Database::</span><span class="crayon-e">addConnectionInfo</span><span class="crayon-sy">(</span><span class="crayon-s">'temporal'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'MI_DB'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-8"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'driver'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'mysql'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-9"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'database'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'MI_DB'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-10"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'username'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'USUARIO'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-11"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'password'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'CONTRASEÑA'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-12"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'host'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'localhost'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-13"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-14">&nbsp;</div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-15"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$query</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-e">Database::</span><span class="crayon-e">getConnection</span><span class="crayon-sy">(</span><span class="crayon-s">'MI_DB'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'temporal'</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-16"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">-&gt;</span><span class="crayon-e">select</span><span class="crayon-sy">(</span><span class="crayon-s">'wp_posts'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'posts'</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-17"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">-&gt;</span><span class="crayon-e">fields</span><span class="crayon-sy">(</span><span class="crayon-s">'posts'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-18"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'id'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-19"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'post_date'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-20"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'post_modified'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-21"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'post_title'</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-22"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'post_content'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-23"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-24"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">-&gt;</span><span class="crayon-e">condition</span><span class="crayon-sy">(</span><span class="crayon-s">"post_type"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"post"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"="</span><span class="crayon-sy">)</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-25"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-o">-&gt;</span><span class="crayon-e">condition</span><span class="crayon-sy">(</span><span class="crayon-s">"post_status"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"publish"</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">"="</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-26">&nbsp;</div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-27"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">source</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">MigrateSourceSQL</span><span class="crayon-sy">(</span><span class="crayon-v">$query</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-28">&nbsp;</div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-29"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// #############################################</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-30"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Definición del destino (lo que se va a crear con los datos conseguidos)</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-31"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">destination</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">MigrateDestinationNode</span><span class="crayon-sy">(</span><span class="crayon-s">'page'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-32">&nbsp;</div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-33"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// #############################################</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-34"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Indicamos cual es el identificador UNICO de cada elemento que se consiga desde la fuente</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-35"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">map</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-h"> </span><span class="crayon-r">new</span><span class="crayon-h"> </span><span class="crayon-e">MigrateSQLMap</span><span class="crayon-sy">(</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-i">machineName</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-36"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-37"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'id'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">array</span><span class="crayon-sy">(</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-38"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'type'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-s">'int'</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-39"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'unsigned'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">TRUE</span><span class="crayon-sy">,</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-40"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-s">'not null'</span><span class="crayon-h"> </span><span class="crayon-o">=</span><span class="crayon-o">&gt;</span><span class="crayon-h"> </span><span class="crayon-t">TRUE</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-41"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-42"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">,</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-43"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-e">MigrateDestinationNode::</span><span class="crayon-e">getKeySchema</span><span class="crayon-sy">(</span><span class="crayon-sy">)</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-44"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-45">&nbsp;</div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-46"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// #############################################</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-47"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-c">// Mapeo de los valores del origen y destino</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-48"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-e">addFieldMapping</span><span class="crayon-sy">(</span><span class="crayon-s">'uid'</span><span class="crayon-sy">)</span><span class="crayon-o">-&gt;</span><span class="crayon-e">defaultValue</span><span class="crayon-sy">(</span><span class="crayon-cn">1</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-49"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-e">addFieldMapping</span><span class="crayon-sy">(</span><span class="crayon-s">'created'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'post_date'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-50"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-e">addFieldMapping</span><span class="crayon-sy">(</span><span class="crayon-s">'changed'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'post_modified'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-51"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-e">addFieldMapping</span><span class="crayon-sy">(</span><span class="crayon-s">'title'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'post_title'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-52"><span class="crayon-h">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="crayon-v">$this</span><span class="crayon-o">-&gt;</span><span class="crayon-e">addFieldMapping</span><span class="crayon-sy">(</span><span class="crayon-s">'body'</span><span class="crayon-sy">,</span><span class="crayon-h"> </span><span class="crayon-s">'post_content'</span><span class="crayon-sy">)</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-584436cbdaf0e694629253-53"><span class="crayon-h">&nbsp;&nbsp;</span><span class="crayon-sy">}</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf0e694629253-54"><span class="crayon-sy">}</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>No voy a profundizar en la implementación de la clase porque este post es solo para demostrar lo fácil que es implementar Migrate. Ya vendrán post hablando de las clases.</p>
<p>Y básicamente te eso es todo lo que necesitas para implementar Migrate.</p>
<p>Bueno, ahora usamos drush<br />
Limpiamos el cache para que Drupal lea el .info de nuestro módulo y sepa que &#8220;posts-migrator-from-db.inc&#8221; existe</p>
		<div id="crayon-584436cbdaf1b937130017" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
drush cc all</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaf1b937130017-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaf1b937130017-1"><span class="crayon-e">drush </span><span class="crayon-e">cc </span><span class="crayon-v">all</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Registramos nuestro migrator:</p>
		<div id="crayon-584436cbdaf24089075781" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
drush migrate-register</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaf24089075781-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaf24089075781-1"><span class="crayon-e">drush </span><span class="crayon-v">migrate</span><span class="crayon-o">-</span><span class="crayon-v">register</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Revisamos que el migrator se haya registrado:</p>
		<div id="crayon-584436cbdaf2d726539211" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
drush migrate-status</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaf2d726539211-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaf2d726539211-1"><span class="crayon-e">drush </span><span class="crayon-v">migrate</span><span class="crayon-o">-</span><span class="crayon-v">status</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Que debería devolver:</p>
		<div id="crayon-584436cbdaf35579364203" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
Group: wordpress Total Imported Unprocessed Status Last imported
WPFromDB 169 0 169 Idle 2013-06-12 17:59:17</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaf35579364203-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-584436cbdaf35579364203-2">2</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaf35579364203-1"><span class="crayon-v">Group</span><span class="crayon-o">:</span><span class="crayon-h"> </span><span class="crayon-e">wordpress </span><span class="crayon-e">Total </span><span class="crayon-e">Imported </span><span class="crayon-e">Unprocessed </span><span class="crayon-e">Status </span><span class="crayon-e">Last </span><span class="crayon-e">imported</span></div><div class="crayon-line crayon-striped-line" id="crayon-584436cbdaf35579364203-2"><span class="crayon-i">WPFromDB</span><span class="crayon-h"> </span><span class="crayon-cn">169</span><span class="crayon-h"> </span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-cn">169</span><span class="crayon-h"> </span><span class="crayon-i">Idle</span><span class="crayon-h"> </span><span class="crayon-cn">2013</span><span class="crayon-o">-</span><span class="crayon-cn">06</span><span class="crayon-o">-</span><span class="crayon-cn">12</span><span class="crayon-h"> </span><span class="crayon-cn">17</span><span class="crayon-o">:</span><span class="crayon-cn">59</span><span class="crayon-o">:</span><span class="crayon-cn">17</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Y si todo está ok, podemos importar nuestros posts:</p>
		<div id="crayon-584436cbdaf3e711454144" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
drush migrate-import WPFromDB</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaf3e711454144-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaf3e711454144-1"><span class="crayon-e">drush </span><span class="crayon-v">migrate</span><span class="crayon-o">-</span><span class="crayon-e">import </span><span class="crayon-v">WPFromDB</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Y para deshacer la importación:</p>
		<div id="crayon-584436cbdaf46490921705" class="crayon-syntax crayon-theme-sublime-text crayon-font-monaco crayon-os-pc print-yes notranslate" data-settings=" minimize scroll-mouseover disable-anim" style=" margin-top: 12px; margin-bottom: 12px; ">
		
			<div class="crayon-plain-wrap"><textarea wrap="soft" class="crayon-plain print-no" data-settings="" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; ">
drush migrate-rollback WPFromDB</textarea></div>
			<div class="crayon-main" style="">
				<table class="crayon-table">
					<tr class="crayon-row">
				<td class="crayon-nums " data-settings="show">
					<div class="crayon-nums-content" style=""><div class="crayon-num" data-line="crayon-584436cbdaf46490921705-1">1</div></div>
				</td>
						<td class="crayon-code"><div class="crayon-pre" style=" -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-584436cbdaf46490921705-1"><span class="crayon-e">drush </span><span class="crayon-v">migrate</span><span class="crayon-o">-</span><span class="crayon-e">rollback </span><span class="crayon-v">WPFromDB</span></div></div></td>
					</tr>
				</table>
			</div>
		</div><p>Chau!</p>
        </div> <!-- //.entry-summary -->
            </div>
 

    </div>

</article> <!--/#post-->
                                                     <div class="clearfix post-navigation">
                                <span class="btn-style previous-post pull-left"><a href="../drupal-conectar-a-una-base-de-datos-externa-al-vuelo/index.html" rel="prev"><i class="fa fa-long-arrow-left"></i> previous article</a></span>                                 <span class="btn-style next-post pull-right"><a href="../drupal-importar-y-sincronizar-desde-una-db-con-migrate/index.html" rel="next">next article <i class="fa fa-long-arrow-right"></i></a></span>                            </div> <!-- .post-navigation -->
                                            
                        <div id="comments" class="comments-area comments">
            <h3 class="comments-title">
            4 Comments        </h3>

        <ul class="comment-list">

            		<li class="pingback even thread-even depth-1" id="comment-679">
			<p>Pingback: <a href='../drupal-importar-y-sincronizar-desde-una-db-con-migrate/index.html' rel='external nofollow' class='url'>Drupal: Importar y sincronizar desde una DB con Migrate | Capy</a> </p>
		</li><!-- #comment-## -->
		<li class="pingback odd alt thread-odd thread-alt depth-1" id="comment-680">
			<p>Pingback: <a href='../migrate-drupal-commerce-product-display/index.html' rel='external nofollow' class='url'>Combo: Importar y sincronizar productos con Migrate + Drupal commerce + product display desde CSV/XML/JSON | Capy</a> </p>
		</li><!-- #comment-## -->
		<li class="pingback even thread-even depth-1" id="comment-901">
			<p>Pingback: <a href='../drupal-importar-y-sincronizar-desde-un-xml-local-o-remoto-con-migrate/index.html' rel='external nofollow' class='url'>Capy | Drupal: Importar y sincronizar desde un XML local o remoto con Migrate</a> </p>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-1316">
			<div id="comment-1316" class="comment-body media">
				
					<div class="comment-avartar pull-left">
						<img alt='' src='http://1.gravatar.com/avatar/19c1df031bf307e5e8d2c89ca11a46c7?s=80&amp;d=identicon&amp;r=g' srcset='http://1.gravatar.com/avatar/19c1df031bf307e5e8d2c89ca11a46c7?s=160&amp;d=identicon&amp;r=g 2x' class='avatar avatar-80 photo' height='80' width='80' />					</div>
					<div class="comment-context media-body">
						<div class="comment-head">
							<span class="comment-author">Matias</span>							<span class="comment-date">25/02/2016</span>

														<span class="comment-reply">
															</span>
						</div>

						
						<div class="comment-content">
							<p>Estimados,<br />
buenas tardes.</p>
<p>Necesito validar usuarios con datos proporcionados desde otro servidor, a través de formato JSON.</p>
<p>Es posible realizar esta tarea con Migrate?.</p>
<p>Gracias por su tiempo.</p>
<p>Saludos cordiales.</p>
						</div>
					</div>
				
			</div>
		</li><!-- #comment-## -->
        </ul><!-- .comment-list -->

        
                <p class="no-comments">:).</p>
        
    
    </div>                                            
                    
                        
            </div> <!-- #content -->

            <div id="sidebar" class="col-md-3" role="complementary">
                

	<div class="my-profile clearfix">
		<div class="profile-bg">
						<img class="img-responsive" src="../wp-content/uploads/2016/01/14567-brick-wall-and-wood-floor-1920x1200-abstract-wallpaper.jpg">
			
						<div class="profile-img">
				<img class="img-responsive" src="../wp-content/uploads/2016/01/IMG-20150521-WA0007-1.jpg">
			</div>
					</div>

		<div class="profile-desc">
							<h2>Capy (Marcelo Tosco)</h2>
										<span>Desarrollador web</span>
									<p>Hola!. en mi blog casi siempre escribo sobre informática, pero no te extrañes si algún día aparece un post que no tenga nada que ver a lo que estés acostumbrado ;)</p>
					</div>

		
<div class="social-share">
	
	<ul>
		
			
			<li><a class="twitter" href="http://twitter.com/capynet" target="_blank" ><i class="fa fa-twitter"></i></a></li>
									<li><a class="linkedin" href="https://es.linkedin.com/in/capynet" target="_blank"><i class="fa fa-linkedin"></i></a></li>
											 
		
	</ul>
	
</div>




	</div>

                <div class="sidebar-inner">
                    <aside class="widget-area">
                                            </aside>
                </div>
            </div> <!-- #sidebar -->

        </div> <!-- .row -->
    </section> <!-- .container -->


        <footer id="footer">
        <div class="container">
            <div class="footer">
                <div class="row">
                                            <div class="col-sm-6">
                          <a href="http://asociaciondrupal.es/" target="_blank"><img class="alignnone size-full wp-image-3123" src="../wp-content/uploads/2016/01/miembro-aed_150x75.jpg" alt="miembro-aed_150x75" width="150" height="75" /></a>                        </div>
                    
                                    </div>
            </div>
        </div>
    </footer><!--/#footer-->
</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','http://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-238596-8', 'auto');
  ga('send', 'pageview');

</script>
<link rel='stylesheet' id='crayon-css'  href='../wp-content/plugins/crayon-syntax-highlighter/css/min/crayon.min2f6a.css?ver=_2.7.2_beta' type='text/css' media='all' />
<script type='text/javascript' src='../wp-includes/js/imagesloaded.min55a0.js?ver=3.2.0'></script>
<script type='text/javascript' src='../wp-includes/js/masonry.mind617.js?ver=3.3.2'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/bootstrap.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.prettyPhoto1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/jquery.countdown.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-content/themes/prolog/js/main1c9b.js?ver=4.6.1'></script>
<script type='text/javascript' src='../wp-includes/js/wp-embed.min1c9b.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"http:\/\/ecapy.com\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
var CrayonSyntaxStrings = {"copy":"Presiona %s para copiar y %s para pegar","minimize":"Click To Expand Code"};
/* ]]> */
</script>
<script type='text/javascript' src='../wp-content/plugins/crayon-syntax-highlighter/js/min/crayon.min2f6a.js?ver=_2.7.2_beta'></script>
</body>

<!-- Mirrored from ecapy.com/drupal-migrate/ by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 04 Dec 2016 15:34:30 GMT -->
</html>